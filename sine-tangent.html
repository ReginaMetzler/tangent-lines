<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tangent to a Sine Curve</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 0; }
        .container { max-width: 700px; margin: 40px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #0001; padding: 32px; }
        h1 { text-align: center; }
        #graph { display: block; margin: 0 auto 24px auto; background: #f0f0f0; border-radius: 8px; }
        .slider-container { text-align: center; margin-top: 16px; }
        .slider-label { font-size: 1.1em; margin-right: 8px; }
        #x0-value { font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sine curve and its Tangent: f(x) = sin(x)</h1>
        <canvas id="graph" width="600" height="400"></canvas>
        <div class="slider-container">
            <span class="slider-label">x₀ = <span id="x0-value">0</span></span>
            <input type="range" id="x0-slider" min="-6.28" max="6.28" step="0.01" value="0">
        </div>
    </div>
    <script>
        // f(x) = sin(x)
        function f(x) { return Math.sin(x); }
        function df(x) { return Math.cos(x); }

        const canvas = document.getElementById('graph');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        const xMin = -2 * Math.PI, xMax = 2 * Math.PI;
        const yMin = -1.5, yMax = 1.5;

        function xToCanvas(x) {
            return (x - xMin) / (xMax - xMin) * width;
        }
        function yToCanvas(y) {
            return height - (y - yMin) / (yMax - yMin) * height;
        }

        function drawAxes() {
            ctx.save();
            ctx.strokeStyle = '#bbb';
            ctx.lineWidth = 1;
            // x axis
            ctx.beginPath();
            ctx.moveTo(xToCanvas(xMin), yToCanvas(0));
            ctx.lineTo(xToCanvas(xMax), yToCanvas(0));
            ctx.stroke();
            // y axis
            ctx.beginPath();
            ctx.moveTo(xToCanvas(0), yToCanvas(yMin));
            ctx.lineTo(xToCanvas(0), yToCanvas(yMax));
            ctx.stroke();
            ctx.restore();
        }

        function drawFunction() {
            ctx.save();
            ctx.strokeStyle = '#0074d9';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let px = 0; px <= width; px++) {
                let x = xMin + (xMax - xMin) * px / width;
                let y = f(x);
                let py = yToCanvas(y);
                if (px === 0) ctx.moveTo(px, py);
                else ctx.lineTo(px, py);
            }
            ctx.stroke();
            ctx.restore();
        }

        function drawTangent(x0) {
            const y0 = f(x0);
            const slope = df(x0);
            // Tangent line: y = slope*(x-x0) + y0
            const x1 = xMin, y1 = slope * (x1 - x0) + y0;
            const x2 = xMax, y2 = slope * (x2 - x0) + y0;
            ctx.save();
            ctx.strokeStyle = '#ff4136';
            ctx.lineWidth = 2;
            ctx.setLineDash([6, 6]);
            ctx.beginPath();
            ctx.moveTo(xToCanvas(x1), yToCanvas(y1));
            ctx.lineTo(xToCanvas(x2), yToCanvas(y2));
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.restore();
        }

        function drawPoint(x0) {
            const y0 = f(x0);
            ctx.save();
            ctx.fillStyle = '#2ecc40';
            ctx.beginPath();
            ctx.arc(xToCanvas(x0), yToCanvas(y0), 7, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#222';
            ctx.lineWidth = 2;
            ctx.stroke();
            // Display coordinates next to the point
            ctx.font = '16px Arial';
            ctx.fillStyle = '#222';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'bottom';
            const label = `(${x0.toFixed(2)}, ${y0.toFixed(2)})`;
            ctx.fillText(label, xToCanvas(x0) + 12, yToCanvas(y0) - 8);
            ctx.restore();
        }

        function draw(x0) {
            ctx.clearRect(0, 0, width, height);
            drawAxes();
            drawFunction();
            drawTangent(x0);
            drawPoint(x0);
        }

        // Slope display
        let slopeDisplay = document.getElementById('slope-value');
        if (!slopeDisplay) {
            const sliderContainer = document.querySelector('.slider-container');
            const slopeElem = document.createElement('div');
            slopeElem.style.marginTop = '10px';
            slopeElem.innerHTML = '<span class="slider-label">Tangent slope (f\'(x₀)) = <span id="slope-value">0</span></span>';
            sliderContainer.appendChild(slopeElem);
            slopeDisplay = document.getElementById('slope-value');
        }

        const slider = document.getElementById('x0-slider');
        const x0Value = document.getElementById('x0-value');
        function update() {
            const x0 = parseFloat(slider.value);
            x0Value.textContent = x0.toFixed(2);
            draw(x0);
            // Display slope
            if (slopeDisplay) {
                slopeDisplay.textContent = df(x0).toFixed(2);
            }
        }
        slider.addEventListener('input', update);
        // Initial draw
        update();
    </script>
</body>
</html>
